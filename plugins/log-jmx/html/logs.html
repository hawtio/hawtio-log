<div class="log-jmx-main" ng-controller="Log.LogController">

  <div class="log-jmx-flex-container">
    <div class="log-jmx-fixed-toolbar">
      <h1>Log</h1>
      <div ng-show="logs.length === 0">
        <div class="spinner spinner-lg loading-page"></div>
      </div>
      <div ng-show="logs.length > 0">
        <pf-toolbar config="toolbarConfig"></pf-toolbar>
        <table class="table table-striped table-bordered log-jmx-header-table">
          <thead>
            <tr>
              <th>Timestamp</th>
              <th>Level</th>
              <th>Logger</th>
              <th>Message</th>
            </tr>
          </thead>
        </table>
      </div>
    </div>
    <div class="log-jmx-scrollable-table">
      <div ng-show="logs.length > 0">
        <table class="table table-striped table-bordered">
          <tbody>
            <tr ng-repeat="log in filteredLogs">
              <td>{{log | logDateFilter}}</td>
              <td class="{{getLevelClass(log.level)}}">{{log.level}}</td>
              <td ng-switch="hasLogSourceHref(log)">
                <a href="" ng-switch-when="true" ng-click="openLogModal(log)">{{log.logger}}</a>
                <span ng-switch-default>{{log.logger}}</span>          
              </td>
              <td ng-bind-html="log.sanitizedMessage | highlight:messageSearchText"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script type="text/ng-template" id="logDetailsModal.html">
    <div class="modal-header">
      <button type="button" class="close" aria-label="Close" ng-click="$dismiss()">
        <span class="pficon pficon-close" aria-hidden="true"></span>
      </button>
      <h4 class="modal-title">Log Details</h4>
    </div>
    <div class="modal-body">
      <dl class="dl-horizontal">
        <dt>Timestamp</dt>
        <dd>{{log.timestamp}}</dd>
      </dl>
    </div>
  </script>

  <!--div ng-show="showRowDetails" class="log-info-panel">
    <div class="log-info-panel-frame">
      <div class="log-info-panel-header">

        <div class="row-fluid">
          <button class="btn" ng-click="showRowDetails = false"><i class="icon-remove"></i> Close</button>
          <div class="btn-group"
             style="margin-top: 9px;"
             hawtio-pager="logs"
             on-index-change="selectRow"
             row-index="selectedRowIndex">
             </div>
          <span>{{selectedRow | logDateFilter}}</span>
          <span class="text-{{logClass(selectedRow)}}"><i class="{{logIcon(selectedRow)}}"></i> <strong>{{selectedRow.level}}</strong></span>
        </div>

        <div class="row-fluid">
          <span title="{{selectedRow.logger}}" ng-switch="hasLogSourceHref(selectedRow)">
            <strong>Logger:</strong>
            <a ng-href="{{logSourceHref(selectedRow)}}" ng-switch-when="true">{{selectedRow.logger}}</a>
            <span ng-switch-default>{{selectedRow.logger}}</span>
          </span>
        </div>
      </div>

      <div class="log-info-panel-body">

        <div class="row-fluid" ng-show="hasLogSourceLineHref(selectedRow)">
          <span><strong>Class:</strong> <span class="green">{{selectedRow.className}}</span></span>
          <span><strong>Method:</strong> {{selectedRow.methodName}}</span>
          <span><strong>File:</strong> <span class="blue">{{selectedRow.fileName}}</span>:<span class="green">{{selectedRow.lineNumber}}</span></span>
        </div>

        <div class="row-fluid">
          <span ng-show="selectedRow.host"><strong>Host:</strong> {{selectedRow.host}}</span>
          <span><strong>Thread:</strong> {{selectedRow.thread}}</span>
        </div>

        <div class="row-fluid" ng-show="hasOSGiProps(selectedRow)">
          <span ng-show="selectedRow.properties['bundle.name']">
            <strong>Bundle Name:</strong> <span class="green">{{selectedRow.properties['bundle.name']}}</span>
          </span>
          <span ng-show="selectedRow.properties['bundle.id']">
            <strong>Bundle ID:</strong> {{selectedRow.properties['bundle.id']}}
          </span>
          <span ng-show="selectedRow.properties['bundle.version']">
            <strong>Bundle Version:</strong> {{selectedRow.properties['bundle.version']}}
          </span>
         </div>

        <div class="row-fluid">
          <dl class="log-message">
            <dt>
              <span>Message:</span>
              <button class="btn"
                      zero-clipboard
                      data-clipboard-text="{{selectedRow.message}}"
                      title="Click to copy this message to the clipboard">
                <i class="icon-copy"></i>
              </button>
            </dt>
            <dd>
              <pre ng-bind-html="selectedRow.sanitizedMessage"></pre>
            </dd>
          </dl>
          <dl class="log-stack-trace" ng-hide="!selectedRow.exception">
            <dt>
              <span>Stack Trace:</span>
              <button class="btn"
                      zero-clipboard
                      data-clipboard-text="{{selectedRow.exception}}"
                      title="Click to copy this stacktrace to the clipboard">
                <i class="icon-copy"></i>
              </button>
            </dt>
            <dd ng-bind-html-unsafe="formatStackTrace(selectedRow.exception)"></dd>
          </dl>
        </div>

      </div>
    </div>
  </div-->

</div>
